/*!
 * vue-event-manager v1.0.5
 * https://github.com/pagekit/vue-event-manager
 * Released under the MIT License.
 */

!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):t.VueEventManager=e()}(this,function(){"use strict";function t(t){return null!==t&&"object"==typeof t}function e(t,e){Object.keys(t||{}).forEach(function(n){e.call(null,t[n],n)})}function n(){var n=this,i=this.$options.events,u=[];i&&(e(i,function(i,s){e(r(i)?i:[i],function(e){var r=0;t(e)&&(r=e.priority,e=e.handler),u.push(o.on(s,e.bind(n),r))})}),this.$on("hook:beforeDestroy",function(){return u.forEach(function(t){return t()})}))}var r=Array.isArray;Array.prototype.findIndex||Object.defineProperty(Array.prototype,"findIndex",{value:function(t){if(null==this)throw new TypeError('"this" is null or not defined');if("function"!=typeof t)throw new TypeError("predicate must be a function");for(var e=Object(this),n=e.length>>>0,r=arguments[1],i=0;i<n;){var o=e[i];if(t.call(r,o,i,e))return i;i++}return-1}});var i=function(){this.listeners={}};i.prototype.on=function(t,e,n){var r=this;void 0===n&&(n=0);var i,o=this.listeners[t]||[];return~(i=o.findIndex(function(t){return t.priority<n}))?o.splice(i,0,{callback:e,priority:n}):o.push({callback:e,priority:n}),this.listeners[t]=o,function(){return r.off(t,e)}},i.prototype.off=function(t,e){e||delete this.listeners[t];var n,r=this.listeners[t];r&&e&&~(n=r.findIndex(function(t){return t.callback===e}))&&r.splice(n,1)},i.prototype.trigger=function(t,e,n){return void 0===e&&(e=[]),void 0===n&&(n=!1),r(e)||(e=[e]),(this.listeners[t]||[]).concat().reduce(function(t,i){var o=function(t){return!1===t?t:(r(t)&&(e=t),i.callback.apply(i.callback,e))};return n?t.then(o):o(t)},n?Promise.resolve():void 0)};var o=new i;return o.install=function(t){this.installed||(t.events=this,t.prototype.$events=this,t.prototype.$trigger=this.trigger.bind(this),t.mixin(Number(t.version[0])<2?{init:n}:{beforeCreate:n}))},"undefined"!=typeof window&&window.Vue&&window.Vue.use(o),o});