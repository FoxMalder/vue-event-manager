/*!
 * vue-event-manager v1.0.6
 * https://github.com/pagekit/vue-event-manager
 * Released under the MIT License.
 */

!function(t,n){"object"==typeof exports&&"undefined"!=typeof module?module.exports=n():"function"==typeof define&&define.amd?define(n):t.VueEventManager=n()}(this,function(){"use strict";var t=Array.isArray;function n(t,n){Object.keys(t||{}).forEach(function(e){n.call(null,t[e],e)})}Array.prototype.findIndex||Object.defineProperty(Array.prototype,"findIndex",{value:function(t){if(null==this)throw new TypeError('"this" is null or not defined');if("function"!=typeof t)throw new TypeError("predicate must be a function");for(var n=Object(this),e=n.length>>>0,r=arguments[1],i=0;i<e;){var o=n[i];if(t.call(r,o,i,n))return i;i++}return-1}});var e=function(){this.listeners={}};e.prototype.on=function(t,n,e){var r=this;void 0===e&&(e=0);var i,o=this.listeners[t]||[];return~(i=o.findIndex(function(t){return t.priority<e}))?o.splice(i,0,{callback:n,priority:e}):o.push({callback:n,priority:e}),this.listeners[t]=o,function(){return r.off(t,n)}},e.prototype.off=function(t,n){n||delete this.listeners[t];var e,r=this.listeners[t];r&&n&&~(e=r.findIndex(function(t){return t.callback===n}))&&r.splice(e,1)},e.prototype.trigger=function(n,e,r){return void 0===e&&(e=[]),void 0===r&&(r=!1),t(e)||(e=[e]),(this.listeners[n]||[]).concat().reduce(function(n,i){var o=function(n){return!1===n?n:(t(n)&&(e=n),i.callback.apply(i.callback,e))};return r?n.then(o):o(n)},r?Promise.resolve():void 0)};var r=new e;function i(){var e=this,i=this.$options.events,o=[];i&&(n(i,function(i,u){n(t(i)?i:[i],function(t){var n,i=0;null!==(n=t)&&"object"==typeof n&&(i=t.priority,t=t.handler),o.push(r.on(u,function(t,n){if("string"==typeof t)return function(){return n[t].apply(n,arguments)};return t.bind(n)}(t,e),i))})}),this.$on("hook:beforeDestroy",function(){return o.forEach(function(t){return t()})}))}return r.install=function(t){this.installed||(t.events=this,t.prototype.$events=this,t.prototype.$trigger=this.trigger.bind(this),t.mixin(Number(t.version[0])<2?{init:i}:{beforeCreate:i}))},"undefined"!=typeof window&&window.Vue&&window.Vue.use(r),r});