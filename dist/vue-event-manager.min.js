/*!
 * vue-event-manager v1.0.1
 * https://github.com/pagekit/vue-event-manager
 * Released under the MIT License.
 */

!function(n,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):n.VueEventManager=t()}(this,function(){"use strict";function n(n){return null!==n&&"object"==typeof n}function t(n,t){Object.keys(n||{}).forEach(function(e){t.call(null,n[e],e)})}function e(o){if(!e.installed){var u=new i;o.mixin({init:function(){var e=this,i=this.$options,o=i.events,f=[];o&&(t(o,function(i,o){t(r(i)?i:[i],function(t){var r=0;n(t)&&(r=t.priority,t=t.handler),f.push(u.on(o,t.bind(e),r))})}),this.$on("hook:beforeDestroy",function(){return f.forEach(function(n){return n()})}))}}),o.prototype.$events=u,o.prototype.$trigger=u.trigger.bind(u)}}var r=Array.isArray;Array.prototype.findIndex||Object.defineProperty(Array.prototype,"findIndex",{value:function(n){if(null==this)throw new TypeError('"this" is null or not defined');if("function"!=typeof n)throw new TypeError("predicate must be a function");for(var t=Object(this),e=t.length>>>0,r=arguments[1],i=0;i<e;){var o=t[i];if(n.call(r,o,i,t))return i;i++}return-1}});var i=function(){this.listeners={}};return i.prototype.on=function(n,t,e){var r=this;void 0===e&&(e=0);var i,o=this.listeners[n]||[];return i=o.findIndex(function(n){return n.priority<e}),~i?o.splice(i,0,{callback:t,priority:e}):o.push({callback:t,priority:e}),this.listeners[n]=o,function(){return r.off(n,t)}},i.prototype.off=function(n,t){t||delete this.listeners[n];var e,r=this.listeners[n];r&&t&&~(e=r.findIndex(function(n){return n.callback===t}))&&r.splice(e,1)},i.prototype.trigger=function(n,t,e){return void 0===t&&(t=[]),void 0===e&&(e=!1),r(t)||(t=[t]),(this.listeners[n]||[]).concat().reduce(function(n,i){var o=function(n){return!1===n?n:(r(n)&&(t=n),i.callback.apply(i.callback,t))};return e?n.then(o):o(n)},e?Promise.resolve():void 0)},"undefined"!=typeof window&&window.Vue&&window.Vue.use(e),e});