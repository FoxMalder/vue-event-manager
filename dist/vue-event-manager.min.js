/*!
 * vue-event-manager v1.0.3
 * https://github.com/pagekit/vue-event-manager
 * Released under the MIT License.
 */

!function(e,n){"object"==typeof exports&&"undefined"!=typeof module?module.exports=n():"function"==typeof define&&define.amd?define(n):e.VueEventManager=n()}(this,function(){"use strict";function e(e){return null!==e&&"object"==typeof e}function n(e,n){Object.keys(e||{}).forEach(function(t){n.call(null,e[t],t)})}function t(o){function u(){var t=this,i=this.$options.events,o=[];i&&(n(i,function(i,u){n(r(i)?i:[i],function(n){var r=0;e(n)&&(r=n.priority,n=n.handler),o.push(f.on(u,n.bind(t),r))})}),this.$on("hook:beforeDestroy",function(){return o.forEach(function(e){return e()})}))}if(!t.installed){var f=new i,c=Number(o.version.split(".")[0]);o.events=f,o.prototype.$events=f,o.prototype.$trigger=f.trigger.bind(f),o.mixin(c<2?{init:u}:{beforeCreate:u})}}var r=Array.isArray;Array.prototype.findIndex||Object.defineProperty(Array.prototype,"findIndex",{value:function(e){if(null==this)throw new TypeError('"this" is null or not defined');if("function"!=typeof e)throw new TypeError("predicate must be a function");for(var n=Object(this),t=n.length>>>0,r=arguments[1],i=0;i<t;){var o=n[i];if(e.call(r,o,i,n))return i;i++}return-1}});var i=function(){this.listeners={}};return i.prototype.on=function(e,n,t){var r=this;void 0===t&&(t=0);var i,o=this.listeners[e]||[];return i=o.findIndex(function(e){return e.priority<t}),~i?o.splice(i,0,{callback:n,priority:t}):o.push({callback:n,priority:t}),this.listeners[e]=o,function(){return r.off(e,n)}},i.prototype.off=function(e,n){n||delete this.listeners[e];var t,r=this.listeners[e];r&&n&&~(t=r.findIndex(function(e){return e.callback===n}))&&r.splice(t,1)},i.prototype.trigger=function(e,n,t){return void 0===n&&(n=[]),void 0===t&&(t=!1),r(n)||(n=[n]),(this.listeners[e]||[]).concat().reduce(function(e,i){var o=function(e){return!1===e?e:(r(e)&&(n=e),i.callback.apply(i.callback,n))};return t?e.then(o):o(e)},t?Promise.resolve():void 0)},"undefined"!=typeof window&&window.Vue&&window.Vue.use(t),t});