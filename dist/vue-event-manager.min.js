/*!
 * vue-event-manager v1.0.0
 * https://github.com/pagekit/vue-event-manager
 * Released under the MIT License.
 */

!function(n,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):n.VueEventManager=t()}(this,function(){"use strict";function n(n){return null!==n&&"object"==typeof n}function t(n,t){Object.keys(n||{}).forEach(function(e){t.call(null,n[e],e)})}function e(o){if(!e.installed){var u=new r;o.mixin({init:function(){var e=this,r=this.$options,o=r.events,c=[];o&&(t(o,function(r,o){t(i(r)?r:[r],function(t){var i=0;n(t)&&(i=t.priority,t=t.handler),c.push(u.on(o,t.bind(e),i))})}),this.$on("hook:beforeDestroy",function(){return c.forEach(function(n){return n()})}))}}),o.prototype.$events=u,o.prototype.$trigger=u.trigger.bind(u)}}var i=Array.isArray,r=function(){this.listeners={}};return r.prototype.on=function(n,t,e){var i=this;void 0===e&&(e=0);var r,o=this.listeners[n]||[];return r=o.findIndex(function(n){return n.priority<e}),~r?o.splice(r,0,{callback:t,priority:e}):o.push({callback:t,priority:e}),this.listeners[n]=o,function(){return i.off(n,t)}},r.prototype.off=function(n,t){t||delete this.listeners[n];var e,i=this.listeners[n];i&&t&&~(e=i.findIndex(function(n){return n.callback===t}))&&i.splice(e,1)},r.prototype.trigger=function(n,t,e){return void 0===t&&(t=[]),void 0===e&&(e=!1),i(t)||(t=[t]),(this.listeners[n]||[]).concat().reduce(function(n,r){var o=function(n){return!1===n?n:(i(n)&&(t=n),r.callback.apply(r.callback,t))};return e?n.then(o):o(n)},e?Promise.resolve():void 0)},"undefined"!=typeof window&&window.Vue&&window.Vue.use(e),e});